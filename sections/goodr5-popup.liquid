{% comment %}
Pop Up Info:
- flaoting window that is centered on the screen for both mobile and desktop
- appears on page load
- has a white background with a blue border and shadow
- interactions:
    - clicking outside the popup closes it
    - clicking the "Nah, I Hate Deals" text closes it
    - clicking the "SHOP ALL STYLES" button takes user to the shop page and adds the code goodr5 to their cart
    - esc key also closes the popup
Contents:
- Desktop
    - Desktop Overlay Background
        - H 654 W 484
        - Color White (#FFFFFF)
        - Corner Radius 8px
        - Stroke #0C2340 width 3px
        - Shadow color #0C2340 -4, 4, 0, 0
    - image layout: picture that i will provide
        - Flow: Vertical
        - Width: Fixed (374px)
        - Height Fixed (360px)
        - Radius 4px
        - Padding
            - Top 144px
            - Right 82px
            - Bottom 144px
            - Left 82px
            - Gap 10px
    - company logo centered on image: logo will be provided by me
    - Text under picture
        - Width: Fill (374px)
        - Height: Hug (56px)
        - Text: "Use code goodr5 for $5 off your first order"
        - Font: Gibson
        - Size: 24px
        - Weight: 700
        - Color: Navy #0C2340
        - horizontal align: center
        - line height: 28px
        - letter spacing: 0%
        - style: Bold
        - case: Uppercase
        - goodr5 is pink #E06287
    - Button
        - Flow: horizontal
        - Width: Fill (374px)
        - Height: Hug (42px)
        - radius 25px
        - border: 2px
            - alignment: inside
        - background color: yellow #EDE939
        - padding
            - Top 12px
            - Right 121px
            - Bottom 12px
            - Left 121px
            - gap 10px
        - shadow color: #0C2340 -4, 4, 0, 0
        - Text: "SHOP ALL STYLES"
            - Width: Hug 150px
            - Height: Hug 18px
            - border: 1px
                - alignment: outside
            - Font: Gibson
            - weight: 700
            - style: Bold
            -line height: 100%
            - letter spacing: 0%
            - horizontal align: center
            - case: Uppercase
            - color: Navy #0C2340
            - size: 18px
            - drop shadow: #0C2340 -2.75, 2.75, 0, 0
    - Text under button
        - Width: hug (164px)
        - Height: Hug (18px)
        - Text: "Nah, I Hate Deals"
        - Font: Gibson
        - style: bold
        - Size: 18px
        - Weight: 700
        - line height: 100%
        - letter spacing: 0%
        - Color: Navy #0C2340
        - horizontal align: center
        - case: uppercase
        - decorations: underline
            - style: solid
            - color: Navy #0C2340
            - thickness: 0%
            - offset: 0%
            - skip ink: true
- Mobile
    - Mobile Overlay Background
        - H 550 W 326
        - Color White (#FFFFFF)
        - Corner Radius 4px
        - Stroke #0C2340 width 2px
        - Shadow color #0C2340 -2.75, 2.75, 0, 0
    - image layout: picture that i will provide
        - Flow: Vertical
        - Width: Fixed (252px)
        - Height Fixed (342px)
        - Radius 4px
        - Padding
            - Top 132px
            - Right 23px
            - Bottom 132px
            - Left 23px
            - Gap 10px
    - company logo centered on image - logo will be provided by me
        - 
    - Text under picture
        - Width: Fill (252px)
        - Height: Hug (40px)
        - Text: "Use code goodr5 for $5 off your first order"
        - Font: Gibson
        - Size: 18px
        - Weight: 700
        - Color: Navy #0C2340
        - horizontal align: center
        - line height: 20px
        - letter spacing: 0%
        - style: Bold
        - case: Uppercase
        - goodr5 is pink #E06287
    - Button
        - Flow: horizontal
        - Width: Fill (252px)
        - Height: Hug (28px)
        - radius 25px
        - border: 1.5px
            - alignment: inside
        - background color: yellow #EDE939
        - padding
            - Top 12px
            - Right 81.49px
            - Bottom 12px
            - Left 81.49px
            - gap 6.73px
        - shadow color: #0C2340 -2.75, 2.75, 0, 0
        - Text: "SHOP ALL STYLES"
            - Width: Hug 117px
            - Height: Hug 14px
            - border: .67px
                - alignment: outside
            - Font: Gibson
            - weight: 700
            - style: Bold
            -line height: 100%
            - letter spacing: 0%
            - horizontal align: center
            - case: Uppercase
            - color: white #FFFFFF
            - size: 14px
            - drop shadow: #0C2340 -1.85, 1.85, 0, 0
    - Text under button
        - Width: hug (128px)
        - Height: Hug (14px)
        - Text: "Nah, I Hate Deals"
        - Font: Gibson
        - style: bold
        - Size: 14px
        - Weight: 700
        - line height: 100%
        - letter spacing: 0%
        - Color: Navy #0C2340
        - horizontal align: center
        - case: uppercase
        - decorations: underline
            - style: solid
            - color: Navy #0C2340
            - thickness: 0%
            - offset: 0%
            - skip ink: true

{% endcomment %}

{% style %}
  /* loading Gibson from adobe fonts */
  @import url('https://use.typekit.net/xci7pdj.css');

  /* existing styles follow */
  .goodr5-overlay, .goodr5-modal {
    font-family: "canada-type-gibson", sans-serif;
    font-weight: 900;
    font-style: bold;
    ...
  }
  ...
{% endstyle %}

{%- if section.settings.show_popup -%}

  <div id="goodr5PopupOverlay" class="goodr5-overlay">
    
    <div class="goodr5-modal">
        
        <button id="goodr5CloseIcon" class="goodr5-close-icon" aria-label="Close popup">
          <img src="{{ 'x.svg' | asset_url }}" alt="Close" width="20" height="20" />
        </button>
      
      <div class="goodr5-image-container">
        <picture>
          <source media="(min-width: 768px)" srcset="{{ 'desktopimage.png' | asset_url }}">

          <!-- Mobile image: fixed rendered size 252x342 (set attributes to match displayed size) -->
          <img src="{{ 'mobileimage.png' | asset_url }}" alt="Promo Background" class="goodr5-bg-img" width="252" height="342" loading="eager" decoding="async">
        </picture>

        <div class="goodr-logo-wrapper">
        
          <img class="goodr-logo goodr-logo--mobile" src="{{ 'goodrlogo.svg' | asset_url }}" alt="goodr Logo" width="150" height="54" loading="eager" decoding="async">

          
          <img class="goodr-logo goodr-logo--desktop" src="{{ 'goodrlogo.svg' | asset_url }}" alt="goodr Logo" width="200" height="72" loading="eager" decoding="async">
        </div>
      </div>

      <div class="goodr5-text-content">
        <p>USE CODE <span class="goodr5-highlight">goodr5</span> FOR $5 OFF YOUR FIRST ORDER</p>
      </div>

      <div class="goodr5-actions">
        <button id="goodr5ShopBtn" class="goodr5-btn">
        <span class="goodr5-btn-text">SHOP ALL STYLES</span>
        </button>
        
        <a href="#" id="goodr5CloseLink" class="goodr5-close-link">Nah, I Hate Deals</a>
      </div>

    </div>
  </div>

  {% style %}
    /* --- FONTS --- */
    .goodr5-overlay, .goodr5-modal {
      font-family: "canada-type-gibson", sans-serif;
      box-sizing: border-box;
    }

    /* --- OVERLAY --- */
    .goodr5-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 9999;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease;
    }

    .goodr5-overlay.is-visible {
      opacity: 1;
      visibility: visible;
    }

    /* --- MODAL BOX --- */
    .goodr5-modal {
      background-color: #FFFFFF;
      border: 2px solid #0C2340;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
    }

    /* --- MOBILE STYLES (< 768px) --- */
    .goodr5-modal {
      width: 326px;
      height: 550px;
      border-radius: 4px;
      box-shadow: -2.75px 2.75px 0px 0px #0C2340;
      padding: 35px 37px;
    }

    .goodr5-image-container {
      position: relative;
      width: 252px;
      height: 342px;
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 14px;
    }

    .goodr5-bg-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .goodr-logo-wrapper {
      position: absolute;
      top: 43%;
      left: 20%;
      text-align: center;
      pointer-events: none;
    }
    
    /* Default: show mobile logo, hide desktop logo */
    .goodr-logo { display: none; }
    .goodr-logo--mobile { display: block; width: 150px; height: 54.16px; }
    .goodr-logo--desktop { display: none; }

    @media (min-width: 768px) {
      /* On desktop show the desktop logo with specified size */
      .goodr-logo--mobile { display: none; }
      .goodr-logo--desktop { display: block; width: 200px; height: 72.21px; }
    }

    .goodr5-text-content {
      width: 252px;
      text-align: center;
      color: #0C2340;
      font-size: 18px;
      font-weight: 700;
      line-height: 20px;
      text-transform: uppercase;
      margin-bottom: 16px;
    }

    /* stack and center elements */
    .goodr5-actions {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Remove default P margins */
    .goodr5-text-content p {
        margin: 0;
    }

    .goodr5-highlight {
      color: #E06287;
    }

    .goodr5-btn {
      width: 252px;
      height: 40px;
      padding: 12px 81.49px;
      background-color: #EDE939;
      border-radius: 25px;
      border: 2px solid #0C2340;
      box-shadow: -2.69px 2.69px 0px 0px #0C2340;
      cursor: pointer;
      color: #FFFFFF;
      font-family: "canada-type-gibson", sans-serif;
      font-size: 14px;
      font-weight: 900;
      text-transform: uppercase;
      -webkit-text-stroke: 1px #0C2340;
      text-shadow: -1.85px 1.85px 0  #0C2340, -1.85px 1.85px 0  #0C2340, -1.85px 1.85px 0  #0C2340, -1.85px 1.85px 0  #0C2340,
        -1.85px 1.85px 0  #0C2340;
      white-space: nowrap;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 16px;
    }

    /* Nudge the button label up slightly (1%) */
    .goodr5-btn .goodr5-btn-text {
      display: inline-block;
      transform: translateY(-5%);
      will-change: transform;
    }

    .goodr5-btn:hover {
      transform: translate(-1px, 1px);
      box-shadow: -1px 1px 0px 0px #0C2340;
    }

    .goodr5-close-link {
      font-size: 14px;
      font-weight: 700;
      color: #0C2340;
      text-decoration: underline;
      text-transform: uppercase;
      cursor: pointer;
    }

    /* Close icon styles (positioned relative to .goodr5-modal) */
    .goodr5-close-icon {
      position: absolute;
      border: none;
      background: transparent;
      padding: 0;
      cursor: pointer;
      display: inline-block;
      /* Mobile default size and position */
      width: 16.16px;
      height: 16.16px;
      top: 13.27px;
      left: 295.69px;
      z-index: 3;
    }

    .goodr5-close-icon img {
      width: 100%;
      height: 100%;
      display: block;
      color: #0C2340;
    }

    /* --- DESKTOP STYLES (>= 768px) --- */
    @media (min-width: 768px) {
      .goodr5-modal {
        width: 484px;
        height: 654px;
        border-width: 3px;
        border-radius: 8px;
        box-shadow: -4px 4px 0px 0px #0C2340;
        padding: 52px 55px;
      }

      .goodr5-image-container {
        width: 374px;
        height: 360px;
        margin-bottom: 20px;
      }

      .goodr-logo-wrapper {
      position: absolute;
      top: 41%;
      left: 23%;
      text-align: center;
      pointer-events: none;
    }

      .goodr5-text-content {
        width: 374px;
        font-size: 24px;
        line-height: 28px;
        margin-bottom: 36px;
      }

      .goodr5-btn {
        width: 374px;
        height: 42px; 
        padding: 12px 121px;
        border-width: 2px;
        box-shadow: -4px 4px 0px 0px #0C2340;
        font-size: 18px;
        margin-bottom: 18px;
        -webkit-text-stroke: 1px #0C2340;
        text-shadow: -2.75px 2.75px 0 #0C2340, -2.75px 2.75px 0 #0C2340, -2.75px 2.75px 0 #0C2340, -2.75px 2.75px 0 #0C2340,
          -2.75px 2.75px 0 #0C2340;
      }

      .goodr5-close-link {
        font-size: 18px;
      }

      /* Desktop close icon overrides */
      .goodr5-close-icon {
        width: 20px;
        height: 20px;
        top: 21.71px;
        left: 441.04px;
      }
    }
  {% endstyle %}

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const popupOverlay = document.getElementById('goodr5PopupOverlay');
      const shopBtn = document.getElementById('goodr5ShopBtn');
      const closeLink = document.getElementById('goodr5CloseLink');

      // OPEN: After 500ms delay
      setTimeout(() => {
        popupOverlay.classList.add('is-visible');
      }, 500);

      // CLOSE Function
      function closePopup() {
        popupOverlay.classList.remove('is-visible');
        setTimeout(() => {
           popupOverlay.style.display = 'none';
        }, 300);
      }

      // Interaction: Click "Nah"
      closeLink.addEventListener('click', function(e) {
        e.preventDefault();
        closePopup();
      });

      // Interaction: Click Outside
      popupOverlay.addEventListener('click', function(e) {
        if (e.target === popupOverlay) {
          closePopup();
        }
      });

      // Interaction: ESC Key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && popupOverlay.classList.contains('is-visible')) {
          closePopup();
        }
      });

      // Interaction: Shop Button
      shopBtn.addEventListener('click', function() {
        window.location.href = '/discount/goodr5?redirect=/collections/all';
      });

      // Interaction: Close icon
      const closeIcon = document.getElementById('goodr5CloseIcon');
      if (closeIcon) {
        closeIcon.addEventListener('click', function(e) {
          e.preventDefault();
          closePopup();
        });
      }
    });
  </script>

{%- endif -%}

{% schema %}
{
  "name": "GOODR5 Pop Up",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_popup",
      "label": "Enable Pop Up",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "GOODR5 Pop Up",
    }
  ]
}
{% endschema %}












  

